<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
  <title>Inventory | CoCo Hua Hin 88</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root { --navy: #0F172A; --border: #F1F5F9; }
    body { font-family: 'Montserrat', sans-serif; background: #F8FAFC; margin: 0; color: #1E293B; -webkit-font-smoothing: antialiased; }
    
    /* 1. COMPACT HEADER - ลดขนาดจาก 3-4rem เหลือเพียงความสวยงามพอดี */
    .master-header { background: var(--navy); border-radius: 0 0 2.5rem 2.5rem; padding: 1.5rem 1.5rem; color: #fff; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 1.2rem; }
    .header-title { font-size: 1.4rem; font-weight: 800; font-style: italic; letter-spacing: -0.5px; text-align: left; padding-left: 0.5rem; }
    .btn-home { position: absolute; top: 50%; right: 1.5rem; transform: translateY(-50%); background: rgba(255,255,255,0.1); width: 40px; height: 40px; border-radius: 12px; display: flex; align-items: center; justify-content: center; }

    /* 2. INVENTORY LIST SYSTEM - บังคับแถวเดียว ไม่ล้นจอ */
    .list-wrap { padding: 0 10px 40px; }
    .table-box { background: white; border-radius: 2rem; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.02); border: 1px solid rgba(0,0,0,0.05); }
    
    .t-head { background: var(--navy); color: #fff; display: flex; padding: 12px 15px; font-size: 0.55rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
    .t-row { display: flex; align-items: center; padding: 10px 12px; border-bottom: 1px solid var(--border); background: #fff; transition: 0.2s; }
    
    /* Column Control - จัดลำดับความกว้างสม่ำเสมอ */
    .c-img { width: 65px; flex-shrink: 0; }
    .c-info { flex: 1; padding-left: 10px; min-width: 0; }
    .c-plot { width: 70px; text-align: center; flex-shrink: 0; }
    .c-status { width: 50px; text-align: center; flex-shrink: 0; }
    .c-edit { width: 35px; text-align: right; flex-shrink: 0; }

    /* 3. ปรับสัดส่วนรูป - ลดความสูง เพิ่มความกว้างพอดี */
    .thumb-box { width: 58px; height: 42px; border-radius: 8px; overflow: hidden; background: #eee; border: 0.5px solid #E2E8F0; }
    .thumb-box img { width: 100%; height: 100%; object-fit: cover; }

    /* 4. TYPOGRAPHY - ออกแบบให้สม่ำเสมอ */
    .id-tag { font-size: 0.58rem; font-weight: 600; color: #94A3B8; font-style: italic; display: block; margin-bottom: 0px; }
    .plot-tag { font-size: 1.05rem; font-weight: 800; color: var(--navy); font-style: italic; line-height: 1; }
    
    .dot-group { display: flex; gap: 3px; justify-content: center; background: #F1F5F9; padding: 4px 6px; border-radius: 10px; width: fit-content; margin: 0 auto; }
    .dot { width: 6px; height: 6px; border-radius: 50%; background: #CBD5E1; }
    .dot-green { background: #10B981; box-shadow: 0 0 5px rgba(16, 185, 129, 0.4); }

    .btn-edit-icon { color: #F97316; font-size: 1.1rem; }
  </style>
</head>
<body class="italic">

  <div class="master-header">
    <h1 class="header-title">CoCo Hua Hin 88</h1>
    <a href="index.html" class="btn-home"><i class="fa-solid fa-house text-white text-sm"></i></a>
  </div>

  <div class="list-wrap">
    <div class="table-box">
      <div class="t-head">
        <div class="c-img">Cover</div>
        <div class="c-info">Unit ID</div>
        <div class="c-plot">Plot</div>
        <div class="c-status">Status</div>
        <div class="c-edit"></div>
      </div>
      <div id="unitList">
        <div class="py-20 text-center text-slate-300 font-bold uppercase text-[10px] tracking-widest animate-pulse">Syncing Database...</div>
      </div>
    </div>
  </div>

  <script>
    const API = "https://script.google.com/macros/s/AKfycbyOnZc6s05eGvHR5XmRnRPAat8vNZpf8cFhL2GiAFjWld-2OBf2OqgP07RU07UTZgDXxA/exec";

    async function load() {
      try {
        const res = await fetch(`${API}?mode=getUnitList&t=${Date.now()}`);
        const data = await res.json();
        document.getElementById('unitList').innerHTML = data.map(u => {
          const isAvail = String(u.Status||"").toLowerCase().includes("avail");
          const img = u.Thumbnail_Image || "https://via.placeholder.com/60x40?text=CoCo";
          return `
            <div class="t-row">
              <div class="c-img"><div class="thumb-box"><img src="${img}" loading="lazy"></div></div>
              <div class="c-info"><span class="id-tag">${u.HP_ID}</span></div>
              <div class="c-plot"><span class="plot-tag">${u.Plot || '-'}</span></div>
              <div class="c-status"><div class="dot-group"><div class="dot ${isAvail?'dot-green':''}"></div><div class="dot"></div></div></div>
              <div class="c-edit"><a href="edit.html?id=${u.HP_ID}" class="btn-edit-icon"><i class="fa-regular fa-pen-to-square"></i></a></div>
            </div>`;
        }).join('');
      } catch(e) { document.getElementById('unitList').innerHTML = '<div class="p-10 text-center text-red-400">Connection Error</div>'; }
    }
    window.onload = load;
  </script>
</body>
</html>
